# SPDX-FileCopyrightText: 2023 - 2025 Slavi Pantaleev
# SPDX-FileCopyrightText: 2023 Julian-Samuel Geb√ºhr
#
# SPDX-License-Identifier: AGPL-3.0-or-later

---

# Below is an example which installs a few services on the host, in different configuration.
# You should tweak this example as you see fit and enable the services that you need.

########################################################################
#                                                                      #
# Playbook                                                             #
#                                                                      #
########################################################################

# Put a strong secret below, generated with `pwgen -s 64 1` or in another way
# Various other secrets will be derived from this secret automatically.
mash_playbook_generic_secret_key: "{{ lookup('env', 'MASH_PLAYBOOK_GENERIC_SECRET_KEY') }}"

########################################################################
#                                                                      #
# /Playbook                                                            #
#                                                                      #
########################################################################


########################################################################
#                                                                      #
# Docker                                                               #
#                                                                      #
########################################################################

# To disable Docker installation (in case you'd be installing Docker in another way),
# remove the line below.
mash_playbook_docker_installation_enabled: true

# To disable Docker SDK for Python installation (in case you'd be installing the SDK in another way),
# remove the line below.
devture_docker_sdk_for_python_installation_enabled: true

# Controls whether container networks will be created with IPv6 support.
#
# If you also have IPv6 support on your server/network and AAAA DNS records pointing to the server,
# enabling this will effectively give you full public IPv6 connectivity (powered by NAT66).
#
# We recommend leaving this enabled even if you don't currently have IPv6 connectivity on your server/network.
# This way, once you eventually get IPv6 connectivity, you won't have to change anything (besides DNS records).
#
# Flipping this setting later on requires manual work (stopping services, deleting and recreating all container networks).
#
# In the future, this setting will likely default to `true`, so if you really want IPv6 disabled, explicitly set this to `false`.
#
# People managing Docker themselves and running an older Docker version will need additional configuration.
#
# Learn more in `docs/configuring-ipv6.md`.
devture_systemd_docker_base_ipv6_enabled: true

########################################################################
#                                                                      #
# /Docker                                                              #
#                                                                      #
########################################################################


########################################################################
#                                                                      #
# gluecode                                                             #
#                                                                      #
########################################################################

base_domain: gluecode.dev
base_timezone: Europe/Berlin

########################################################################
#                                                                      #
# /gluecode                                                            #
#                                                                      #
########################################################################

########################################################################
#                                                                      #
# postgres                                                             #
#                                                                      #
########################################################################

postgres_enabled: true

# Put a strong password below, generated with `pwgen -s 64 1` or in another way
postgres_connection_password: "{{ lookup('env', 'POSTGRES_CONNECTION_PASSWORD') }}"

########################################################################
#                                                                      #
# /postgres                                                            #
#                                                                      #
########################################################################

########################################################################
#                                                                      #
# convertx                                                             #
#                                                                      #
########################################################################

convertx_enabled: true

convertx_hostname: convertx.{{ base_domain }}
convertx_environment_variables_webroot: /

########################################################################
#                                                                      #
# /convertx                                                            #
#                                                                      #
########################################################################

########################################################################
#                                                                      #
# gowa                                                             #
#                                                                      #
########################################################################

gowa_enabled: true
gowa_hostname: gowa.{{ base_domain }}
gowa_container_environment_webhook: "https://{{ n8n_hostname }}/webhook/bc6fb443-cf3c-44a4-b2aa-2d4ded8bcfd2?secret=ahc6zielie3ahpee1sahpheiy7phe9iezohloorapootheiquich9aisaerahr4i"

########################################################################
#                                                                      #
# /gowa                                                            #
#                                                                      #
########################################################################

########################################################################
#                                                                      #
# languagetool                                                         #
#                                                                      #
########################################################################

languagetool_enabled: true

languagetool_hostname: languagetool.{{ base_domain }}
languagetool_path_prefix: /

########################################################################
#                                                                      #
# /languagetool                                                        #
#                                                                      #
########################################################################

########################################################################
#                                                                      #
# n8n                                                                  #
#                                                                      #
########################################################################

n8n_enabled: true
n8n_hostname: "n8n.{{ base_domain}}"
n8n_timezone: "{{ base_timezone }}"

########################################################################
#                                                                      #
# /n8n                                                                 #
#                                                                      #
########################################################################

########################################################################
#                                                                      #
# paperless                                                            #
#                                                                      #
########################################################################

# paperless_enabled: true
# paperless_hostname: paperless.{{ base_domain }}

# Set the following variables to create an initial admin user
# It will not re-create an admin user, it will not change a password if the user is already created
# paperless_admin_user: USERNAME
# paperless_admin_password: SECURE_PASSWORD

# Valkey configuration, as described below

########################################################################
#                                                                      #
# /paperless                                                           #
#                                                                      #
########################################################################

########################################################################
#                                                                      #
# rssbridge                                                            #
#                                                                      #
########################################################################

rssbridge_enabled: true
rssbridge_hostname: rssbridge.{{ base_domain }}

# Enable token authentication
rssbridge_config_authentication_token: "{{ lookup('env', 'RSSBRIDGE_CONFIG_AUTHENTICATION_TOKEN') }}"

########################################################################
#                                                                      #
# /rssbridge                                                           #
#                                                                      #

########################################################################
#                                                                      #
# com.devture.ansible.role.timesync                                    #
#                                                                      #
########################################################################

# To ensure the server's clock is synchronized (using systemd-timesyncd/ntpd),
# we enable the timesync service.

devture_timesync_installation_enabled: true

########################################################################
#                                                                      #
# /com.devture.ansible.role.timesync                                   #
#                                                                      #
########################################################################

########################################################################
#                                                                      #
# semaphore                                                            #
#                                                                      #
########################################################################

semaphore_enabled: true

semaphore_hostname: semaphore.{{ base_domain }}
semaphore_container_image_customizations_just_installation_enabled: true
semaphore_container_image_customizations_packages_to_install_custom: [ "py3-regex" ]

semaphore_access_key_encryption: "{{ lookup('env', 'SEMAPHORE_ACCESS_KEY_ENCRYPTION') }}"
semaphore_environment_variables_tmp_path: /repos

semaphore_admin_username: admin
semaphore_admin_password: "{{ lookup('env', 'SEMAPHORE_ADMIN_PASSWORD') }}"
semaphore_admin_name: Admin
semaphore_admin_email: oliver@{{ base_domain }}

########################################################################
#                                                                      #
# /semaphore                                                           #
#                                                                      #
########################################################################


########################################################################
#                                                                      #
# traefik                                                              #
#                                                                      #
########################################################################

# Most services require a reverse-proxy, so we enable Traefik here.
#
# Learn more about the Traefik service in docs/services/traefik.md
#
# If your server already runs Traefik, you will run into port conflicts by installing it twice.
# See docs/interoperability.md for solutions.

mash_playbook_reverse_proxy_type: playbook-managed-traefik

traefik_config_entrypoint_web_to_web_secure_redirection_enabled: false

traefik_dashboard_enabled: true
traefik_dashboard_hostname: traefik.mash.{{ base_domain }}
traefik_dashboard_basicauth_enabled: true
traefik_dashboard_basicauth_user: dashboard
traefik_dashboard_basicauth_password: "{{ lookup('env', 'TRAEFIK_DASHBOARD_BASICAUTH_PASSWORD') }}"

########################################################################
#                                                                      #
# /traefik                                                             #
#                                                                      #
########################################################################
